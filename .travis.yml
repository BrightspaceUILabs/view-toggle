language: node_js
node_js: node
addons:
  chrome: stable
script:
- npm run lint
- |
  if [ $TRAVIS_PULL_REQUEST != false ] && [ $TRAVIS_SECURE_ENV_VARS == true ]; then
    echo "Pull request with secure environment variables, running Sauce tests...";
    npm run test:sauce || travis_terminate 1;
  else
    echo "Not a pull request and/or no secure environment variables, running headless tests...";
    npm run test:travis || travis_terminate 1;
  fi
after_success:
- frauci-update-version -d=skip && export TRAVIS_TAG=$(frauci-get-version)
env:
  global:
  - SAUCE_USERNAME: Horgan
  - REPO_NAME=view-toggle
  - OWNER_NAME=BrightspaceUILabs
  #GITHUB_RELEASE_TOKEN
  - secure: BgHS9nplSIaCGVF783+7r3Sub9NFZIt+89iCqOWeIWpN5l7LBke83PVk36N23vmNMFByIOOJa/au+rImUdkur89t6SGjzUKBnVukIQ5z8a8bW7HAAxHnA5hjmOK+oUSBe8MZ3FC2JzjT6xqsliP5sLP6dzQVX40Jhv4ALkyN/X4Qa1QSQMNj8rujUjeFHEs03TxWzoxAFAKOcWcaJFIZqxGHTPh7G6X1siBv5nJQ7qKr8OQdxsz/lciHtZdkqiEF2U0j9KgLj+3tVo8DI06ScTSI5ek/+pe4WAm7s4W6gPzkLG+KHaoDCxEU0EUZ8nOphKzFDV3zKA7xHpORe264SGRHrXEvTmNC+7NkV3gXqpbb5G65XD3LYhIzjksBEPUMhgmpHXKT64+AzSYdRXq8Ng1zjpnLbGWyjVcLO6hNKBsMT5Qq3o/oyI5IMEcTPiZsMUp+XOSSbqLyjHG/iwHwupn7Joj7OAO0VlE9Tdo1MSFO7UkDqJIWgFBjB18qk7t1yWOqskjqmGL4A499F4jq4gsaTqQhj+G4jXEWbfK/4jUKGMkCCoyqEiyHZS64/uWThD5CpG00VHI2gnUaz9i+a2Zj+p0kiNLKNJGllP6UOUcHF/g8o0fhzd7CQyhRZ1zyCQgZPnqESYjR+e1z6eKfrKPvG1eKtWcpSDbPpX3Yv2c=
  #SAUCE_ACCESS_KEY
  - secure: YsrE8kYp4VhqNP1QYKvM9gK2mVLYlMitxEYXOrTcZPVtLO1XegdswZ0cioKvM9tH1krXsdKXVelfT+yLFdQ4iOIUKr5r+Vvuer10p2SubiL4vmRI7RBvAgylOe4oPkjhPKQm37/GZPVeVkvFXjVcth4+MjZFKtR+LeJJ0N2/DbHOCeHHyRX7pKEFjLwuPd6Q8p7m2tQoVps+MnUthTs+LYLGyLYf5J7B7/xdrfEVYDC3XIuubWmR0wYj/vhROSJn67r+cegLyjxO42Sr3r96516mmrbJOoPkkTO1tX9/Dxo3L7C3xBB3byq2D3z8tItTnEExzz0wDmRsh5UKf+GuPai9PpN7vwOIjcNj612SFpUgfWzNPYRJjM1sjreb5VSrGk5MpArRdKzoi1m7GXsW85TNCKLUxhu2IchbyIPcLQ6OWjN7dbYyEdwdaXlvm3j9j3oca3lvJ4CxIqryIsZch9RtAs4DFdNQgEkKm8yGGHWHjDujjZ2mos064lxCFKR6fAUYln+DcU3OTzSKBwSrLC5JW8j0LcsD3IGoMenz5gSO7mbvsPSipWGdADPv8Si0+pJkGsmprrlwN5apZBr38C2PJr9Ef/JkAV7bpOFTQUq2NR+386v/xMtV6oW2yMxr2lJ9A4gDp27mSePDbdw4RJJSi+LDwPRMamJ5JqOzcdw=
deploy:
- provider: npm
  email: d2ltravisdeploy@d2l.com
  skip_cleanup: true
  api_key:
    #09ab......d0dd
    secure: Ay+1i0bWxqQHUTkwmZsE5BYGae/ymsLUMQVkm8MeYlQpZtmm9NjnaMFbJbsqosPG1ziSZPT1+t6gr8m4rROd4HwAH1gsIPPipJF7Ngh8/TvM1/4Ii9FhZJGs2dh8HuNQkdYkOEyWOyBt6JdG++zY4I8b04Trl/kYvsdQmzqWPN0Nj+rS9vgaQEvzVm4Rp2P4sDhxWeoWOb2pvTrfUZ21OjuMajHNed9oJDZ9GgY4GAphaU4XKDxKPOcQjn/J7LTN1bE23k07o+IfaL5h8w2M2VEfK9k+pqw1Qh99UuaYoF/fB/dX/d6tOIKhpWaxVnGyu3JMo9WCsSLq1ugtIE+AZ9JgIUh0khMUqQ+IxOcLjINA8OiwhSliMK3SRgN7hWFLBGnHRw6CCIxVKn45cKnE3lN6G15Oih4qYcHo5rPrUZt3wzSncXVB7TYm/Q00kXqJQPYpLGZTFCDH9jkWJ/RvkhbmvQYKrLtOTEm54qij2DEnye5WjVVlfDkhj10Pl3q9HOBbYmeHc0zaMXHCwKWqAVPm1yRggjON5RtLyTi20lGt3jnLROSKiFdJ+pjRvgawMz4WR3aIC6cgo7l7emQrLHmrOv0jW/t98ZqONVM35s3VFiXxAu3kq7L99q+odtd6Y8Yfl/hvFq2kqvvtlySkh/OG6qLMgd08StwlgRspMRw=
  on:
    tags: true
    repo: BrightspaceUILabs/view-toggle
